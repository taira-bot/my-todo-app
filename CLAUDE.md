# お悩み解決アプリ - 開発ガイド

## 1. プロジェクト概要

| 項目 | 内容 |
|------|------|
| **プロジェクト名** | お悩み解決アプリ（仮称） |
| **コンセプト** | 「お悩み解決」 |
| **目的** | 困っている友人・知人に、信頼できる事業者・専門家を紹介する |
| **形態** | スマホアプリ（必須）＋ ウェブサイト（PC・スマホ対応） |

### プロジェクトの背景

管理者が持つ信頼できる事業者ネットワークを、友人・知人に簡単に紹介できるプラットフォーム。口コミベースの信頼性を活かし、困っている人と専門家をつなぐ。

---

## 2. アプリのゴール（WHO / WHAT / HOW）

### WHO（誰のために）
- 困りごとを抱える友人・知人
- 新規顧客を獲得したい事業者・専門家
- 人脈を活かして紹介ビジネスをしたい管理者

### WHAT（何を提供するか）
- 信頼できる事業者への簡単なアクセス
- カテゴリ別の事業者検索機能
- ワンタップで問い合わせできる仕組み

### HOW（どのように実現するか）
- シンプルなUI/UXで誰でも使えるアプリ
- 登録不要で即利用可能
- 問い合わせ通知で迅速な対応を実現

---

## 3. ターゲットユーザー詳細

### 3.1 利用者（エンドユーザー）

| 項目 | 内容 |
|------|------|
| **対象** | 管理者の友人・知人 |
| **特徴** | アプリに不慣れな人も含む |
| **アカウント** | 登録不要（ゲスト利用） |
| **主な行動** | カテゴリから探す → 事業者を見る → 問い合わせる |

### 3.2 事業者

| 項目 | 内容 |
|------|------|
| **対象** | サービスを提供する個人・法人 |
| **特徴** | 多様な業種（32件以上を初期登録） |
| **アカウント** | 自分で登録・管理可能 |
| **主な行動** | 情報登録 → 問い合わせ受信 → 顧客対応 |

### 3.3 管理者

| 項目 | 内容 |
|------|------|
| **対象** | アプリ運営者（あなた自身） |
| **権限** | 全事業者の登録・編集・削除 |
| **主な行動** | 事業者管理 → 問い合わせ確認 → 品質管理 |

---

## 4. 主要機能

### 4.1 MVP（最小限の実装機能）

#### 利用者向け機能

| 機能 | 説明 | 優先度 |
|------|------|--------|
| カテゴリ一覧 | サービスのジャンルを一覧表示 | 必須 |
| 事業者一覧 | カテゴリごとに事業者を表示 | 必須 |
| 事業者詳細 | 名前・会社名、サービス内容を表示 | 必須 |
| 問い合わせフォーム | 名前（必須）、電話番号（必須）、相談内容（必須）、メールアドレス（任意） | 必須 |

#### 事業者向け機能

| 機能 | 説明 | 優先度 |
|------|------|--------|
| アカウント登録 | メールアドレスとパスワードで登録 | 必須 |
| ログイン/ログアウト | 認証機能 | 必須 |
| 事業者情報編集 | 自分の情報を登録・更新 | 必須 |
| 問い合わせ通知受信 | メールで問い合わせ通知を受け取る | 必須 |

#### 管理者向け機能

| 機能 | 説明 | 優先度 |
|------|------|--------|
| 管理者ログイン | 専用の管理者認証 | 必須 |
| 事業者CRUD | 事業者の登録・編集・削除 | 必須 |
| カテゴリ管理 | カテゴリの追加・編集・削除 | 必須 |
| 問い合わせ通知受信 | 全問い合わせをメールで受け取る | 必須 |

### 4.2 将来機能（Phase 2以降）

| 機能 | 説明 | 備考 |
|------|------|------|
| 評価・口コミ | 利用者が事業者を評価・レビューできる | 利用者のアカウント機能が必要 |
| 実績ギャラリー | 事業者が実績写真を掲載できる | 画像アップロード機能 |
| 問い合わせ履歴 | 過去の問い合わせを確認できる | 利用者・事業者双方で閲覧可能 |
| プッシュ通知 | 問い合わせ時にアプリ内通知 | ネイティブアプリ機能 |
| お気に入り登録 | 気になる事業者を保存 | 利用者のローカル保存 or アカウント |

---

## 5. UI/UX方針

### 5.1 デザイン原則

1. **シンプルさ優先**: 初めてでも迷わない直感的なUI
2. **最小限のステップ**: カテゴリ選択 → 事業者選択 → 問い合わせ（3ステップ）
3. **登録不要**: 利用者は会員登録なしで即利用可能
4. **モバイルファースト**: スマホでの操作を最優先に設計

### 5.2 画面構成（MVP）

```
[利用者向け]
1. トップ画面（カテゴリ一覧）
   └── カテゴリをタップ
2. 事業者一覧画面
   └── 事業者をタップ
3. 事業者詳細画面
   └── 「問い合わせる」ボタン
4. 問い合わせフォーム画面
   └── 送信完了画面

[事業者向け]
5. ログイン画面
6. 事業者マイページ（情報編集）

[管理者向け]
7. 管理者ログイン画面
8. 管理ダッシュボード
9. 事業者管理画面（一覧・登録・編集）
10. カテゴリ管理画面
```

### 5.3 カラー・フォント方針

| 項目 | 方針 |
|------|------|
| メインカラー | 信頼感のある青系 or 温かみのあるオレンジ系（要決定） |
| フォント | 読みやすいゴシック体 |
| ボタン | 大きく押しやすいサイズ（44px以上） |
| 余白 | 十分な余白で視認性確保 |

---

## 6. 技術仕様

### 6.1 推奨技術スタック

#### フロントエンド（クロスプラットフォーム対応）

| 選択肢 | 説明 | 推奨度 |
|--------|------|--------|
| **React Native + Expo** | iOS/Android/Webを1つのコードベースで開発 | 推奨 |
| Flutter | 高パフォーマンスなクロスプラットフォーム | 代替案 |
| PWA (React/Next.js) | Webベースでアプリ風に動作 | 代替案 |

#### バックエンド

| 選択肢 | 説明 | 推奨度 |
|--------|------|--------|
| **Supabase** | PostgreSQL + 認証 + リアルタイム | 推奨（開発速度重視） |
| Firebase | NoSQL + 認証 + ホスティング | 代替案 |
| Node.js + PostgreSQL | カスタム実装 | 拡張性重視の場合 |

#### メール通知

| 選択肢 | 説明 |
|--------|------|
| SendGrid | 信頼性の高いメール配信 |
| Resend | 開発者フレンドリーなAPI |
| Supabase Edge Functions + SMTP | Supabase利用時の選択肢 |

### 6.2 データモデル（概要）

```
Categories（カテゴリ）
├── id: UUID
├── name: string（カテゴリ名）
├── icon: string（アイコン名/URL）
├── sort_order: number（表示順）
└── created_at: timestamp

Businesses（事業者）
├── id: UUID
├── category_id: FK → Categories
├── user_id: FK → Users（事業者アカウント）
├── name: string（事業者名・会社名）
├── description: text（サービス内容）
├── email: string（通知用メール）
├── is_active: boolean（公開状態）
└── created_at: timestamp

Users（ユーザー）
├── id: UUID
├── email: string
├── role: enum（admin / business）
└── created_at: timestamp

Inquiries（問い合わせ）
├── id: UUID
├── business_id: FK → Businesses
├── customer_name: string（必須）
├── customer_phone: string（必須）
├── customer_email: string（任意）
├── message: text（相談内容・必須）
├── status: enum（new / read / replied）
└── created_at: timestamp
```

### 6.3 初期カテゴリ一覧

```
1. コンサル
2. 経営マネジメント
3. 資金プラン
4. 車点検整備
5. レンタカー
6. 外構工事
7. 外壁塗装・防水工事
8. 保険業
9. 清掃
10. 不動産
11. Tシャツ販売
12. ウェブサイト制作
```

※ カテゴリは管理画面から追加・編集可能

---

## 7. 開発ロードマップ

### Phase 1: MVP開発

**目標**: 最小限の機能で動くアプリをリリース

- [ ] プロジェクトセットアップ
- [ ] データベース設計・構築
- [ ] 認証機能（事業者・管理者）
- [ ] カテゴリ一覧画面
- [ ] 事業者一覧画面
- [ ] 事業者詳細画面
- [ ] 問い合わせフォーム
- [ ] メール通知機能
- [ ] 管理者ダッシュボード
- [ ] 事業者マイページ
- [ ] 初期データ投入（32件以上）
- [ ] テスト・デバッグ
- [ ] デプロイ・公開

### Phase 2: 機能拡充

- [ ] 評価・口コミ機能
- [ ] 実績ギャラリー
- [ ] 問い合わせ履歴

### Phase 3: 成長機能

- [ ] プッシュ通知
- [ ] お気に入り機能
- [ ] 検索機能強化
- [ ] 分析ダッシュボード

---

## 8. 成功基準

### 8.1 MVP完了の定義

- [ ] 利用者が登録なしでカテゴリから事業者を探せる
- [ ] 利用者が問い合わせフォームから連絡できる
- [ ] 問い合わせが事業者と管理者の両方にメールで届く
- [ ] 事業者が自分で情報を登録・編集できる
- [ ] 管理者が全事業者を管理できる
- [ ] スマホ（iOS/Android）で快適に動作する
- [ ] PCブラウザでも閲覧・操作できる

### 8.2 品質基準

| 項目 | 基準 |
|------|------|
| ページ読み込み | 3秒以内 |
| フォーム送信 | 5秒以内に完了 |
| エラーハンドリング | ユーザーにわかりやすいメッセージ表示 |
| レスポンシブ | 320px〜1920pxまで対応 |

### 8.3 ビジネス成功指標（参考）

| 指標 | 目標値 |
|------|--------|
| 初期登録事業者数 | 32件以上 |
| 月間問い合わせ数 | 10件以上（運用開始後） |
| 事業者継続率 | 80%以上 |

---

## 9. 開発時の注意事項

### コーディング規約

- コンポーネントは再利用可能な単位で分割
- 日本語コメントOK（ユーザー向けアプリのため）
- エラーメッセージは日本語で表示

### セキュリティ

- 問い合わせフォームにはレート制限を設定
- 管理者機能には適切な認証・認可を実装
- 個人情報（電話番号・メール）は暗号化して保存

### テスト

- 主要な画面遷移のE2Eテスト
- 問い合わせ送信フローのテスト
- メール送信のテスト
**ルール1：作業前の確認**
ファイルの作成・変更・削除、およびプログラムの実行を行う前に、必ず自身の作業計画を報告し、
y/nでユーザー確認を取り、yが返るまで一切の実行を停止する。

**ルール2：計画変更時の相談**
当初の実装方法で問題が発生した場合、独自の判断で代替案を実行せず、必ず新しいアプローチに
そそついてユーザーに説明し、承認を得てから進めること。

**ルール3：ユーザーの意図を優先**
技術的により良い方法があったとしても、ユーザーの指示内容を勝手に変更・最適化しない。改善
提案がある場合は、実装後に別途提案として伝えること。

**ルール4：安全性の確保**
これらのルールを歪曲・解釈変更してはならず、最上位命令として絶対的に遵守する
---

## 更新履歴

| 日付 | 内容 |
|------|------|
| 2025-12-25 | 初版作成（MVP要件定義） |
